<!DOCTYPE html>
<html lang="en">

<head>
    <base href="/" />
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Polling App</title>
    <link rel="stylesheet" href="/style.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.4/jquery.rateyo.min.css">
    <script src="https://code.jquery.com/jquery-3.6.4.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/rateYo/2.3.4/jquery.rateyo.min.js"></script>
</head>

<body>
    <nav>
        <a href="/" onclick="navigate('/'); return false;">Home</a>
        <a href="/blocked" onclick="navigate('/blocked'); return false;">Blocked</a>
    </nav>

    <div id="main-content">
        <div id="poll-list-page" class="wrapper" style="display:none;">
            <h1>All Polls</h1>
            <ul id="poll-list"></ul>
        </div>

        <div id="poll-page" class="wrapper" style="display:none;">
            <h1 id="form-title"></h1>
            <p id="form-description"></p>
            <label class="name" for="newOptionInput">New Option:</label>
            <input type="text" id="newOptionInput">
            <button id="addOptionButton" disabled>Add New Option</button>
            <div style=" margin-top: 20px; margin-bottom:10px;">
                <label for="option-sort-select">Sort By: </label>
                <select id="option-sort-select">
                    <option value="name">Name (A-Z)</option>
                    <option value="created_at">Newest</option>
                </select>
            </div>
            <div class="ratings-result">
                <h2>Ratings</h2>
                <ul id="ratings-section"></ul>
            </div>
            <form id="ratingForm">
                <div id="rating-options-wrapper" class="options-list">
                    <h2>Options</h2>
                </div>
                <button id="submitBtn" type="submit" disabled>Submit Ratings</button>
            </form>

            <div id="comments-section" class="comments-section">
                <h2>Comments</h2>
                <form id="add-comment-form" style="margin-top:10px;">
                    <textarea id="comment-input" placeholder="Add a comment..." style="width:70%;" rows="3" required></textarea>
                    <button type="submit">Add Comment</button>
                </form>
                <ul id="comments-list"></ul>
            </div>
        </div>


        <!-- Poll Creation Modal -->
        <div id="poll-setup-modal"
            style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.5); z-index:1000;">
            <div
                style="background:#fff; max-width:400px; margin:10vh auto; padding:2em; border-radius:8px; position:relative;">
                <h2>Setup Poll</h2>
                <label class="modal-field-label">Title:
                    <input type="text" id="setup-title" style="width:100%;" />
                </label>
                <label class="modal-field-label">Description:
                    <textarea id="setup-description" style="width:100%;" rows="3"></textarea>
                </label>
                <label id="setup-options-label" class="modal-field-label" style="display: block;">
                    Options (comma separated):
                    <input type="text" id="setup-options" style="width:100%;"
                        placeholder="e.g. Avengers, Swat kats, Thunder blues" />
                </label>
                <button id="setup-save-btn">Save</button>
            </div>
        </div>
        <div id="reported-tabs-page" class="wrapper" style="display:none;"></div>
    </div>

    <script src="/scripts/state.js"></script>
    <script src="/scripts/api.js"></script>
    <script src="/scripts/pollOptions.js"></script>
    <script src="/scripts/ratings.js"></script>
    <script src="/scripts/utils.js"></script>
    <script src="/scripts/main.js"></script>
</body>

</html>